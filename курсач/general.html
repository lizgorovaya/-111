<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOOK SHOP</title>
    <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<header>
    <div class="logo">
        <a href="/general.html" class="logo">
            <img src="images/logo.png" alt="BOOK SHOP Logo">
            <span>BOOK SHOP</span>
        </a>
    </div>
    <nav>
        <a href="general.html">Главная</a>
        <a href="catalog.html">Каталог</a>
        <a href="authors1.html">Авторы</a>
        <a id="orders-link" href="#">Заказы</a>
    </nav>
    <div class="auth-buttons">
        <button class="login-btn">
            Войти
        </button>
        <a href="registration.html">
            <button class="register-btn">Зарегистрироваться</button>
        </a>
        
    </div>
</header>

<!-- <section class="hero">
    <div class="hero-content">
        <h1>Бестселлеры уже у нас в каталоге</h1>
        <button class="more-btn">Подробнее</button>
    </div>
</section> -->
<div class="watermark"></div>
<section class="hero">
    <div class="carousel">
        <div class="slide active">
            <img src="images/head1.jpg" alt="Изображение 1">
            <div class="hero-content">
                <h1>Первый слайд</h1>
                <button class="more-btn">Узнать больше</button>
            </div>
        </div>
        <div class="slide">
            <img src="images/head2.jpg" alt="Изображение 2">
            <div class="hero-content">
                <h1>Второй слайд</h1>
                <button class="more-btn">Узнать больше</button>
            </div>
        </div>
        <div class="slide">
            <img src="images/head3.jpg" alt="Изображение 3">
            <div class="hero-content">
                <h1>Третий слайд</h1>
                <button class="more-btn">Узнать больше</button>
            </div>
        </div>
    </div>
    <!-- Пагинация -->
    <div class="pagination">
        <span class="dot active" data-slide="0"></span>
        <span class="dot" data-slide="1"></span>
        <span class="dot" data-slide="2"></span>
    </div>
</section>

<div class="main-content">
    <div class="about">
        <div class="text-container">
            <h2>Коротко о нас</h2>
            <p>BOOK SHOP — это место, где классика литературного мира переплетается с инновационными технологиями, создавая уникальное 
                пространство для всех, кто любит книги и знания. Здесь можно найти не только литературу всех жанров, но и цифровые материалы, аудиокниги и интерактивные издания. В магазине регулярно проводятся встречи с
                авторами, литературные мастер-классы и тематические лекции, превращающие чтение в увлекательное и насыщенное общение.</p>
        </div>
        <div class="image-container">
            <img src="images/head4.png" alt="About Image" class="section-image">
        </div>
    </div>

    <div class="recommendations">
        <div class="image-container">
            <img src="images/head5.png" alt="Recommendations Image" class="section-image">
        </div>
        <div class="text-container">
            <h2>Рекомендательный сервис</h2>
            <p>Рекомендательный сервис BOOK SHOP — это интеллектуальная система, которая помогает каждому читателю находить книги,
                 максимально отвечающие его вкусам и интересам. Анализируя ваши предпочтения, прочитанные книги и отзывы,
                 сервис предлагает персонализированные подборки литературы: от бестселлеров до малоизвестных жемчужин.</p>
        </div>
    </div>
</div>



<footer>
    <div class="logo">
        <a href="general.html">
            <img src="images/logo.png" alt="BOOK SHOP Logo">
        </a>
    </div>
</footer>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Обработчик клика по кнопке
        document.querySelector('.more-btn').addEventListener('click', function() {
            alert('Переход на страницу с подробной информацией');
        });
    
        // Карусель
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
    
        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.remove('active');
                slide.style.left = i === index ? '0' : '100%';
            });
            slides[index].classList.add('active');
        }
    
        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            showSlide(currentSlide);
        }
    
        setInterval(nextSlide, 10000); // смена слайдов каждые 3 секунды
    });

        // Получаем все слайды и индикаторы
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.dot');

    // Функция для показа нужного слайда
    function showSlide(index) {
        // Убираем класс 'active' у всех слайдов и индикаторов
        slides.forEach((slide) => slide.classList.remove('active'));
        dots.forEach((dot) => dot.classList.remove('active'));

        // Добавляем класс 'active' к выбранному слайду и индикатору
        slides[index].classList.add('active');
        dots[index].classList.add('active');
    }

    // Добавляем обработчик событий на индикаторы
    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            showSlide(index);
        });
    });

   document.addEventListener('DOMContentLoaded', () => {
    const loginButton = document.querySelector('.login-btn');

    if (!loginButton) {
        console.error("Кнопка с классом '.login-btn' не найдена");
        return;
    }

    // Проверяем статус авторизации
    if (localStorage.getItem("isLoggedIn")) {
        loginButton.textContent = 'Выйти'; // Меняем текст кнопки

        loginButton.addEventListener('click', () => {
            // Удаляем авторизацию
            localStorage.removeItem("isLoggedIn");
            window.location = "autorization.html"; // Перенаправляем на страницу авторизации
        });
    } else {
        loginButton.addEventListener('click', () => {
            window.location = "autorization.html";
        });
    }
});

document.addEventListener('DOMContentLoaded', () => {
    const ordersLink = document.getElementById('orders-link');
    if (!ordersLink) {
        console.error("Элемент с id 'orders-link' не найден!");
        return;
    } else {
        console.log("Элемент найден:", ordersLink);
    }
});

document.addEventListener('DOMContentLoaded', () => {
    const ordersLink = document.getElementById('orders-link');

    if (!ordersLink) {
        console.error("Элемент с id 'orders-link' не найден в DOM!");
        return;
    }

    // Запрос на сервер для получения роли пользователя
    fetch('http://localhost:8080/api/orders/user-role') // Укажите правильный URL для получения роли
        .then(response => {
            if (!response.ok) {
                throw new Error('Ошибка при получении роли пользователя');
            }
            return response.json();
        })
        .then(data => {
            const role = data.role; // Предполагаем, что сервер возвращает объект с полем role
            console.log('Роль пользователя:', role);

            if (role === 'ROLE_USER') {
                ordersLink.href = 'user_orders.html';
                console.log("Назначена ссылка для USER:", ordersLink.href);
            } else if (role === 'ROLE_ADMIN') {
                ordersLink.href = 'all-orders.html';
                console.log("Назначена ссылка для ADMIN:", ordersLink.href);
            } else {
                console.error('Неизвестная роль:', role);
            }

            // Финальная проверка
            console.log("Финальное значение href:", ordersLink.href);
        })
        .catch(error => {
            console.error('Ошибка:', error);
        });
});


    </script>

</body>
</html>
